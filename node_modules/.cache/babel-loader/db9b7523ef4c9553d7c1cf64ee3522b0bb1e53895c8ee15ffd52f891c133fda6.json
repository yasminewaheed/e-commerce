{"ast":null,"code":"import React,{useContext,useState}from\"react\";import{useFormik}from\"formik\";import*as Yup from\"yup\";import axios from\"axios\";import{Link,useNavigate}from\"react-router-dom\";import{UserContext}from\"../Context/UserContext\";import{Helmet}from\"react-helmet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){let{setUsertoken,setlogin,setUserId}=useContext(UserContext);let navigat=useNavigate();const[errmass,seterrmass]=useState(\"\");const[isloasing,setisloading]=useState(false);async function getApi(request){console.log(request);seterrmass(\"\");setisloading(true);let{data}=await axios.post(\"https://ecommerce.routemisr.com/api/v1/auth/signin\",request).catch(err=>{setisloading(false);seterrmass(err.response.data.message);});console.log(data.token);if(data.message===\"success\"){localStorage.setItem(\"userToken\",data.token);localStorage.setItem(\"userName\",data.user.name);localStorage.getItem(\"userId\",data.id);setUsertoken(data.token);setlogin(data.user.name);setUserId(data.user.id);navigat(\"/Home\");}}const validationSchem=Yup.object({email:Yup.string().email(\"email is Not vaild\").required(\"email is required\"),password:Yup.string().matches(/[a-zA-Z]/,\"password not valid\").min(5,\"password is too short\").required(\"password is required\")});const registration=useFormik({initialValues:{email:\"\",password:\"\"},validationSchema:validationSchem,onSubmit:getApi});// console.log(registration);\nconsole.log(registration);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-50 mx-auto my-5\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"apple-touch-icon\",href:\"../src/images/apple-touch-icon.png\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"icon\",href:\"../src/images/favicon.ico\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"mb-3\",children:\"Login Now:\"}),errmass?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:errmass}):null,/*#__PURE__*/_jsxs(\"form\",{onSubmit:registration.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"mb-1\",children:\"email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:registration.values.email,className:\"form-control\",onChange:registration.handleChange,onBlur:registration.handleBlur}),registration.errors.email&&registration.touched.email?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:registration.errors.email}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"mb-1\",children:\"password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:registration.values.password,className:\"form-control\",onChange:registration.handleChange,onBlur:registration.handleBlur}),registration.errors.password&&registration.touched.password?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:registration.errors.password}):null]}),/*#__PURE__*/_jsx(Link,{to:\"/Forgetpass\",style:{textDecoration:\"none\",textDecorationStyle:\"none\"},className:\"text-black fw-bolder\",children:/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:\"forget Password?\"})}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:\"-50px\"},type:\"submit\",disabled:!(registration.isValid&&registration.dirty),className:\"btn bg-main text-white d-block ms-auto\",children:isloasing?/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-spinner fa-spin\"}):\"Login\"})]})]})});}","map":{"version":3,"names":["React","useContext","useState","useFormik","Yup","axios","Link","useNavigate","UserContext","Helmet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","setUsertoken","setlogin","setUserId","navigat","errmass","seterrmass","isloasing","setisloading","getApi","request","console","log","data","post","catch","err","response","message","token","localStorage","setItem","user","name","getItem","id","validationSchem","object","email","string","required","password","matches","min","registration","initialValues","validationSchema","onSubmit","children","className","rel","href","handleSubmit","htmlFor","type","value","values","onChange","handleChange","onBlur","handleBlur","errors","touched","to","style","textDecoration","textDecorationStyle","marginTop","disabled","isValid","dirty"],"sources":["E:/Frontend course/React/e-commerce/src/components/Login/Login.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport axios from \"axios\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { UserContext } from \"../Context/UserContext\";\nimport { Helmet } from \"react-helmet\";\n\nexport default function Login() {\n  let { setUsertoken, setlogin, setUserId } = useContext(UserContext);\n  let navigat = useNavigate();\n  const [errmass, seterrmass] = useState(\"\");\n  const [isloasing, setisloading] = useState(false);\n  async function getApi(request) {\n    console.log(request);\n    seterrmass(\"\");\n    setisloading(true);\n    let { data } = await axios\n      .post(`https://ecommerce.routemisr.com/api/v1/auth/signin`, request)\n      .catch((err) => {\n        setisloading(false);\n        seterrmass(err.response.data.message);\n      });\n    console.log(data.token);\n    if (data.message === \"success\") {\n      localStorage.setItem(\"userToken\", data.token);\n      localStorage.setItem(\"userName\", data.user.name);\n      localStorage.getItem(\"userId\", data.id);\n      setUsertoken(data.token);\n      setlogin(data.user.name);\n      setUserId(data.user.id);\n      navigat(\"/Home\");\n    }\n  }\n  const validationSchem = Yup.object({\n    email: Yup.string()\n      .email(\"email is Not vaild\")\n      .required(\"email is required\"),\n    password: Yup.string()\n      .matches(/[a-zA-Z]/, \"password not valid\")\n      .min(5, \"password is too short\")\n      .required(\"password is required\"),\n  });\n\n  const registration = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n    },\n    validationSchema: validationSchem,\n    onSubmit: getApi,\n  });\n  // console.log(registration);\n  console.log(registration);\n\n  return (\n    <>\n      <div className=\"w-50 mx-auto my-5\">\n        <Helmet>\n          <title>Login</title>\n          <link\n            rel=\"apple-touch-icon\"\n            href=\"../src/images/apple-touch-icon.png\"\n          />\n          <link rel=\"icon\" href=\"../src/images/favicon.ico\" />\n        </Helmet>\n        <h2 className=\"mb-3\">Login Now:</h2>\n        {errmass ? <div className=\"alert alert-danger\">{errmass}</div> : null}\n        <form onSubmit={registration.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\" className=\"mb-1\">\n              email:\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={registration.values.email}\n              className=\"form-control\"\n              onChange={registration.handleChange}\n              onBlur={registration.handleBlur}\n            ></input>\n            {registration.errors.email && registration.touched.email ? (\n              <div className=\"alert alert-danger\">\n                {registration.errors.email}\n              </div>\n            ) : null}\n          </div>\n          <div className=\"form-group mb-2\">\n            <label htmlFor=\"password\" className=\"mb-1\">\n              password:\n            </label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={registration.values.password}\n              className=\"form-control\"\n              onChange={registration.handleChange}\n              onBlur={registration.handleBlur}\n            ></input>\n            {/* <Link\n              to={``}\n              style={{ textDecoration: \"none\", textDecorationStyle: \"none\" }}\n              className=\"text-black fw-bolder\"\n            >\n              <p className=\"mt-3\">forget Password</p>\n            </Link> */}\n            {registration.errors.password && registration.touched.password ? (\n              <div className=\"alert alert-danger\">\n                {registration.errors.password}\n              </div>\n            ) : null}\n          </div>\n          <Link\n            to={`/Forgetpass`}\n            style={{ textDecoration: \"none\", textDecorationStyle: \"none\" }}\n            className=\"text-black fw-bolder\"\n          >\n            <p className=\"mt-3\">forget Password?</p>\n          </Link>\n          <button\n            style={{ marginTop: \"-50px\" }}\n            type=\"submit\"\n            disabled={!(registration.isValid && registration.dirty)}\n            className=\"btn bg-main text-white d-block ms-auto\"\n          >\n            {isloasing ? <i className=\"fa fa-spinner fa-spin\"></i> : \"Login\"}\n          </button>\n        </form>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}